@using AppCoreLite.Enums;

@model FileBrowserViewModel

@{
    ViewBag.Title = "File Browser";
}

<h1>@ViewBag.Title</h1>
<hr />
@if (Model != null)
{
    <div class="row">
        <div class="col-11">
            <h3>@Html.Raw(Model.Title)</h3>
        </div>
        @if (Model.FileType == FileTypes.Text)
        {
            <div class="col-1">
                <button id="clipboardbutton" class="btn btn-dark">Copy Content</button>
            </div>
        }
    </div>
    <hr />
    <div class="row">
        <div class="col-12">
            @if (Model.FileContent != null)
            {
                if (Model.FileType == FileTypes.Text)
                {
                    <pre>
                        <code id="clipboardcontainer" class="free dragscroll language-@Model.FileContentType" style="height: 500px; overflow: auto;cursor: grab;">
                            @Model.FileContent
                        </code>
                    </pre>
                }
                else
                {
                    <img src="@Model.FileContent" class="img-fluid" />
                }
            }
            else
            {
                <ul class="navbar-nav">
                    @if (Model.Contents != null)
                    {
                        @foreach (var content in Model.Contents)
                        {
                            <li><a style="color: #1e1e1e;" asp-action="Index" asp-route-path="@content.FileFolders">@content.FileName</a></li>
                        }
                    }
                </ul>
            }
        </div>
    </div>
}

@section Scripts
{
    <link href="~/lib/highlight.js/styles/vs2015.min.css" rel="stylesheet" />
    <script src="~/lib/highlight.js/highlight.min.js"></script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/dragscroll/dragscroll.min.js"></script>
    <script src="~/js/Clipboard.js"></script>

    <script>
        $(function () {
            $("code").text($("code").text().trim());
            hljs.highlightAll();

            $("#clipboardbutton").click(function(){
                copyToClipboard("clipboardcontainer", "clipboardbutton", "Copied!");
            });
        });
    </script>
}